{"ast":null,"code":"var _jsxFileName = \"D:\\\\prem\\\\experiment\\\\Drone Mission Planner\\\\frontend\\\\src\\\\pages\\\\MissionPlanner.jsx\",\n  _s = $RefreshSig$();\nimport React, { useEffect, useState } from \"react\";\nimport { getMissions, updateMissionStatus } from \"../services/missionService\";\nimport { io } from \"socket.io-client\";\nimport MissionForm from \"../components/MissionForm\";\nimport MapDisplay from \"../components/MapDisplay\";\nimport { jsxDEV as _jsxDEV, Fragment as _Fragment } from \"react/jsx-dev-runtime\";\nconst socket = io(\"http://localhost:5000\"); // Connect to WebSocket server\n\nconst MissionPlanner = () => {\n  _s();\n  const [missions, setMissions] = useState([]);\n  const [progress, setProgress] = useState({}); // Store progress of each mission\n\n  useEffect(() => {\n    fetchMissions();\n\n    // Listen for mission updates\n    socket.on(\"missionUpdated\", updatedMission => {\n      setMissions(prevMissions => prevMissions.map(mission => mission._id === updatedMission._id ? updatedMission : mission));\n    });\n\n    // Listen for progress updates\n    socket.on(\"missionProgress\", ({\n      id,\n      progress\n    }) => {\n      setProgress(prevProgress => ({\n        ...prevProgress,\n        [id]: progress * 20\n      })); // 20% per step\n    });\n    return () => {\n      socket.off(\"missionUpdated\");\n      socket.off(\"missionProgress\");\n    };\n  }, []);\n  const fetchMissions = async () => {\n    const data = await getMissions();\n    setMissions(data);\n  };\n  const handleStatusUpdate = async (id, newStatus) => {\n    await updateMissionStatus(id, newStatus);\n    if (newStatus === \"In Progress\") {\n      setProgress({\n        ...progress,\n        [id]: 0\n      }); // Reset progress when mission starts\n    }\n  };\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"container mt-4\",\n    children: [/*#__PURE__*/_jsxDEV(\"h2\", {\n      children: \"Mission Planner\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 50,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(MissionForm, {\n      onMissionAdded: fetchMissions\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 51,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(MapDisplay, {\n      missions: missions\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 52,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"ul\", {\n      className: \"list-group mt-3\",\n      children: missions.map(mission => {\n        let bgColor = \"\";\n        if (mission.status === \"Cancelled\") bgColor = \"bg-secondary\"; // Grey\n        if (mission.status === \"Completed\") bgColor = \"bg-success text-white\"; // Green\n        if (mission.status === \"Pending\") bgColor = \"bg-light\"; // Default\n        if (mission.status === \"In Progress\") bgColor = \"bg-warning\"; // Yellow\n\n        return /*#__PURE__*/_jsxDEV(\"li\", {\n          className: `list-group-item d-flex justify-content-between align-items-center ${bgColor}`,\n          children: [/*#__PURE__*/_jsxDEV(\"div\", {\n            children: [/*#__PURE__*/_jsxDEV(\"strong\", {\n              children: mission.name\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 67,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(\"br\", {}, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 68,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n              className: \"text-primary\",\n              children: [/*#__PURE__*/_jsxDEV(\"b\", {\n                children: \"Start:\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 70,\n                columnNumber: 19\n              }, this), \" \", mission.startCity]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 69,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n              children: \" \\u279D \"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 72,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n              className: \"text-danger\",\n              children: [/*#__PURE__*/_jsxDEV(\"b\", {\n                children: \"Destination:\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 74,\n                columnNumber: 19\n              }, this), \" \", mission.destCity]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 73,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(\"br\", {}, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 77,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n              className: `badge bg-dark mt-1`,\n              children: mission.status\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 78,\n              columnNumber: 17\n            }, this), mission.status === \"In Progress\" && progress[mission._id] !== undefined && /*#__PURE__*/_jsxDEV(\"span\", {\n              className: \"ms-3\",\n              children: [\"\\uD83D\\uDE80 Progress: \", progress[mission._id], \"%\"]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 80,\n              columnNumber: 19\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 66,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            children: [mission.status === \"Pending\" && /*#__PURE__*/_jsxDEV(\"button\", {\n              className: \"btn btn-warning btn-sm me-2\",\n              onClick: () => handleStatusUpdate(mission._id, \"In Progress\"),\n              children: \"Start\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 85,\n              columnNumber: 19\n            }, this), mission.status === \"In Progress\" && /*#__PURE__*/_jsxDEV(_Fragment, {\n              children: [/*#__PURE__*/_jsxDEV(\"button\", {\n                className: \"btn btn-danger btn-sm me-2\",\n                onClick: () => handleStatusUpdate(mission._id, \"Cancelled\"),\n                children: \"Cancel\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 93,\n                columnNumber: 21\n              }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n                className: \"btn btn-success btn-sm\",\n                onClick: () => handleStatusUpdate(mission._id, \"Completed\"),\n                children: \"Complete\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 98,\n                columnNumber: 21\n              }, this)]\n            }, void 0, true)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 83,\n            columnNumber: 15\n          }, this)]\n        }, mission._id, true, {\n          fileName: _jsxFileName,\n          lineNumber: 63,\n          columnNumber: 13\n        }, this);\n      })\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 54,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 49,\n    columnNumber: 5\n  }, this);\n};\n_s(MissionPlanner, \"/mQxk9w85Q4dr38t9G3II6w2KgE=\");\n_c = MissionPlanner;\nexport default MissionPlanner;\nvar _c;\n$RefreshReg$(_c, \"MissionPlanner\");","map":{"version":3,"names":["React","useEffect","useState","getMissions","updateMissionStatus","io","MissionForm","MapDisplay","jsxDEV","_jsxDEV","Fragment","_Fragment","socket","MissionPlanner","_s","missions","setMissions","progress","setProgress","fetchMissions","on","updatedMission","prevMissions","map","mission","_id","id","prevProgress","off","data","handleStatusUpdate","newStatus","className","children","fileName","_jsxFileName","lineNumber","columnNumber","onMissionAdded","bgColor","status","name","startCity","destCity","undefined","onClick","_c","$RefreshReg$"],"sources":["D:/prem/experiment/Drone Mission Planner/frontend/src/pages/MissionPlanner.jsx"],"sourcesContent":["import React, { useEffect, useState } from \"react\";\r\nimport { getMissions, updateMissionStatus } from \"../services/missionService\";\r\nimport { io } from \"socket.io-client\";\r\nimport MissionForm from \"../components/MissionForm\";\r\nimport MapDisplay from \"../components/MapDisplay\";\r\n\r\nconst socket = io(\"http://localhost:5000\"); // Connect to WebSocket server\r\n\r\nconst MissionPlanner = () => {\r\n  const [missions, setMissions] = useState([]);\r\n  const [progress, setProgress] = useState({}); // Store progress of each mission\r\n\r\n  useEffect(() => {\r\n    fetchMissions();\r\n\r\n    // Listen for mission updates\r\n    socket.on(\"missionUpdated\", (updatedMission) => {\r\n      setMissions((prevMissions) =>\r\n        prevMissions.map((mission) =>\r\n          mission._id === updatedMission._id ? updatedMission : mission\r\n        )\r\n      );\r\n    });\r\n\r\n    // Listen for progress updates\r\n    socket.on(\"missionProgress\", ({ id, progress }) => {\r\n      setProgress((prevProgress) => ({ ...prevProgress, [id]: progress * 20 })); // 20% per step\r\n    });\r\n\r\n    return () => {\r\n      socket.off(\"missionUpdated\");\r\n      socket.off(\"missionProgress\");\r\n    };\r\n  }, []);\r\n\r\n  const fetchMissions = async () => {\r\n    const data = await getMissions();\r\n    setMissions(data);\r\n  };\r\n\r\n  const handleStatusUpdate = async (id, newStatus) => {\r\n    await updateMissionStatus(id, newStatus);\r\n    if (newStatus === \"In Progress\") {\r\n      setProgress({ ...progress, [id]: 0 }); // Reset progress when mission starts\r\n    }\r\n  };\r\n\r\n  return (\r\n    <div className=\"container mt-4\">\r\n      <h2>Mission Planner</h2>\r\n      <MissionForm onMissionAdded={fetchMissions} />\r\n      <MapDisplay missions={missions} />\r\n\r\n      <ul className=\"list-group mt-3\">\r\n        {missions.map((mission) => {\r\n          let bgColor = \"\";\r\n          if (mission.status === \"Cancelled\") bgColor = \"bg-secondary\"; // Grey\r\n          if (mission.status === \"Completed\") bgColor = \"bg-success text-white\"; // Green\r\n          if (mission.status === \"Pending\") bgColor = \"bg-light\"; // Default\r\n          if (mission.status === \"In Progress\") bgColor = \"bg-warning\"; // Yellow\r\n\r\n          return (\r\n            <li\r\n              key={mission._id}\r\n              className={`list-group-item d-flex justify-content-between align-items-center ${bgColor}`}>\r\n              <div>\r\n                <strong>{mission.name}</strong>\r\n                <br />\r\n                <span className=\"text-primary\">\r\n                  <b>Start:</b> {mission.startCity}\r\n                </span>\r\n                <span> ➝ </span>\r\n                <span className=\"text-danger\">\r\n                  <b>Destination:</b> {mission.destCity}\r\n                </span>\r\n\r\n                <br />\r\n                <span className={`badge bg-dark mt-1`}>{mission.status}</span>\r\n                {mission.status === \"In Progress\" && progress[mission._id] !== undefined && (\r\n                  <span className=\"ms-3\">🚀 Progress: {progress[mission._id]}%</span>\r\n                )}\r\n              </div>\r\n              <div>\r\n                {mission.status === \"Pending\" && (\r\n                  <button\r\n                    className=\"btn btn-warning btn-sm me-2\"\r\n                    onClick={() => handleStatusUpdate(mission._id, \"In Progress\")}>\r\n                    Start\r\n                  </button>\r\n                )}\r\n                {mission.status === \"In Progress\" && (\r\n                  <>\r\n                    <button\r\n                      className=\"btn btn-danger btn-sm me-2\"\r\n                      onClick={() => handleStatusUpdate(mission._id, \"Cancelled\")}>\r\n                      Cancel\r\n                    </button>\r\n                    <button\r\n                      className=\"btn btn-success btn-sm\"\r\n                      onClick={() => handleStatusUpdate(mission._id, \"Completed\")}>\r\n                      Complete\r\n                    </button>\r\n                  </>\r\n                )}\r\n              </div>\r\n            </li>\r\n          );\r\n        })}\r\n      </ul>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default MissionPlanner;\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}